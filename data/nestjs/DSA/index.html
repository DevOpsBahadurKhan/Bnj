<!-- 
<!DOCTYPE html>
<html>
<head>
  <title>Sync API Call Problem</title>
</head>
<body>
  <h2>Sync API Call Example</h2>
  <button onclick="getAllDataSync()">Fetch Data (Sync)</button>

  <script>
    function fetchSync(url) {
      const xhr = new XMLHttpRequest();
      xhr.open("GET", url, false); // Synchronous = true blocking
      xhr.send(null);

      if (xhr.status === 200) {
        return JSON.parse(xhr.responseText);
      } else {
        console.log("Error fetching:", url);
        return [];
      }
    }

    function getAllDataSync() {
      const start = Date.now();

      const todos = fetchSync("https://jsonplaceholder.typicode.com/todos");
      const posts = fetchSync("https://jsonplaceholder.typicode.com/posts");
      const users = fetchSync("https://jsonplaceholder.typicode.com/users");
      const photos = fetchSync("https://jsonplaceholder.typicode.com/photos");

      const end = Date.now();
      console.log(`⏱️ Time Taken (Sync): ${end - start} ms`);
      console.log("Todos:", todos.length);
      console.log("Posts:", posts.length);
      console.log("Users:", users.length);
      console.log("Photos:", photos.length);
    }
  </script>
</body>
</html>
 -->


<!DOCTYPE html>
<html>

<head>
  <title>Async API Call Solution</title>
</head>

<body>
  <h2>Async API Call Example</h2>
  <button onclick="getAllDataAsync()">Fetch Data (Async)</button>

  <script>
    async function getAllDataAsync() {
      const start = Date.now();

      try {
        const [todos, posts, users, photos] = await Promise.all([
          fetch("https://jsonplaceholder.typicode.com/todos").then(res => res.json()),
          fetch("https://jsonplaceholder.typicode.com/posts").then(res => res.json()),
          fetch("https://jsonplaceholder.typicode.com/users").then(res => res.json()),
          fetch("https://jsonplaceholder.typicode.com/photos").then(res => res.json()),
        ]);

        const end = Date.now();
        console.log(`⏱️ Time Taken (Async Parallel): ${end - start} ms`);
        console.log("Todos:", todos.length);
        console.log("Posts:", posts.length);
        console.log("Users:", users.length);
        console.log("Photos:", photos.length);

      } catch (err) {
        console.error("❌ Error fetching data", err);
      }
    }
  </script>



  <h2>Sync API Call Example</h2>
  <button onclick="getAllDataSync()">Fetch Data (Sync)</button>

  <script>
    function fetchSync(url) {
      const xhr = new XMLHttpRequest();
      xhr.open("GET", url, false); // Synchronous = true blocking
      xhr.send(null);

      if (xhr.status === 200) {
        return JSON.parse(xhr.responseText);
      } else {
        console.log("Error fetching:", url);
        return [];
      }
    }

    function getAllDataSync() {
      const start = Date.now();

      const todos = fetchSync("https://jsonplaceholder.typicode.com/todos");
      const posts = fetchSync("https://jsonplaceholder.typicode.com/posts");
      const users = fetchSync("https://jsonplaceholder.typicode.com/users");
      const photos = fetchSync("https://jsonplaceholder.typicode.com/photos");

      const end = Date.now();
      console.log(`⏱️ Time Taken (Sync): ${end - start} ms`);
      console.log("Todos:", todos.length);
      console.log("Posts:", posts.length);
      console.log("Users:", users.length);
      console.log("Photos:", photos.length);
    }


   
  </script>
</body>

</html>