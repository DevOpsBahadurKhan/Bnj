<!DOCTYPE html>
<html>
<head>
    <title>Best Invoice with HTML2Canvas and JsPDF</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #invoice { padding: 20px; border: 1px solid #ccc; }
        .header { text-align: center; margin-bottom: 20px; }
        .header img { width: 100px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #000; padding: 10px; text-align: left; }
        .footer { text-align: center; margin-top: 20px; }
        .footer img { width: 100px; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div>
        <label>Customer Name: <input type="text" id="customerName"></label>
        <label>Items (one per line, format: description|quantity|price): <textarea id="items"></textarea></label>
        <label>Tax Rate (%): <input type="number" id="taxRate" step="0.01" value="0"></label>
        <button id="generate">Generate PDF</button>
    </div>
    <div id="invoice" style="display: none;"></div>

    <script>
        function generateInvoicePDF() {
            const customerName = document.getElementById('customerName').value;
            const itemsInput = document.getElementById('items').value.split('\n').filter(row => row.trim() !== '');
            const taxRate = parseFloat(document.getElementById('taxRate').value) / 100;
            const invoiceDiv = document.getElementById('invoice');

            // Invoice HTML content
            let html = `<div class="header"><img src="https://via.placeholder.com/100" alt="Logo"><h1>Invoice for ${customerName}</h1></div>`;
            html += '<table><tr><th>Item</th><th>Qty</th><th>Price</th></tr>';
            let total = 0;
            itemsInput.forEach(row => {
                const [description, quantity, price] = row.split('|').map(s => s.trim());
                const itemTotal = parseFloat(quantity) * parseFloat(price);
                total += itemTotal;
                html += `<tr><td>${description}</td><td>${quantity}</td><td>$${parseFloat(price).toFixed(2)}</td></tr>`;
            });
            html += '</table>';
            html += `<p>Total (with ${taxRate * 100}% tax): $${(total + total * taxRate).toFixed(2)}</p>`;
            html += '<div class="footer"><img src="https://via.placeholder.com/100" alt="Footer Logo"><p>Thank You!</p></div>';

            invoiceDiv.innerHTML = html;
            invoiceDiv.style.display = 'block';

            // Generate PDF
            const { jsPDF } = window.jspdf;
            html2canvas(invoiceDiv).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const doc = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                const imgProps = doc.getImageProperties(imgData);
                const pdfWidth = doc.internal.pageSize.getWidth();
                const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
                doc.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                doc.save('invoice.pdf');
            });
        }

        document.getElementById('generate').addEventListener('click', generateInvoicePDF);
    </script>
</body>
</html>