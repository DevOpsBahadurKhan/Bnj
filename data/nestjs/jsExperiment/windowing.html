<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Job Openings (Bootstrap + Virtual Scroll)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f0f2f5;
    }

    #container {
      height: 600px;
      overflow-y: auto;
      border: 1px solid #dee2e6;
      background-color: #fff;
      border-radius: 0.5rem;
      padding: 1rem;
    }

    .job-card {
      margin-bottom: 1rem;
      transition: box-shadow 0.3s ease;
    }

    .job-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }

    .job-image {
      width: 70px;
      height: 70px;
      background-image: url("https://via.placeholder.com/70");
      background-size: cover;
      background-position: center;
      border-radius: 0.5rem;
    }

    .apply-btn {
      white-space: nowrap;
    }

    #backToTop {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 10;
      display: none;
    }
  </style>
</head>

<body>
  <div class="container py-4">
    <h2 class="mb-4">üíº Job Openings</h2>
    <div id="container" class="shadow-sm"></div>
  </div>

  <button id="backToTop" class="btn btn-dark">‚¨ÜÔ∏è Top</button>

  <script>
    const container = document.getElementById("container");
    const backToTopBtn = document.getElementById("backToTop");

    const rowHeight = 120;
    const totalItems = 100;

    const data = Array.from({ length: totalItems }, (_, i) => ({
      title: `Software Engineer ${i + 1}`,
      company: `Tech Corp ${i + 1}`,
      location: `City ${i % 10 + 1}`,
    }));

    function render() {
      const scrollTop = container.scrollTop;
      const viewportHeight = container.clientHeight;
      const startIndex = Math.floor(scrollTop / rowHeight);
      const visibleCount = Math.ceil(viewportHeight / rowHeight) + 1;
      const endIndex = Math.min(startIndex + visibleCount, totalItems);
      const offsetY = startIndex * rowHeight;

      const visibleData = data.slice(startIndex, endIndex);

      container.innerHTML = `
        <div style="height:${offsetY}px;"></div>
        ${visibleData.map(item => `
          <div class="card job-card p-3 d-flex flex-row align-items-center">
            <div class="job-image me-3"></div>
            <div class="flex-grow-1">
              <h5 class="mb-1">${item.title}</h5>
              <div class="text-muted">${item.company}</div>
              <div class="small text-secondary">üìç ${item.location}</div>
            </div>
            <button class="btn btn-outline-primary apply-btn">Apply</button>
          </div>
        `).join("")}
      `;
    }

    container.addEventListener("scroll", () => {
      render();
      backToTopBtn.style.display = container.scrollTop > 200 ? "block" : "none";
    });

    backToTopBtn.addEventListener("click", () => {
      container.scrollTo({ top: 0, behavior: "smooth" });
    });

    render(); // initial
  </script>
</body>

</html>
